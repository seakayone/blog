<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
      <meta charset="utf-8"/>
      <title>A JUnit 5 Extension for testing Akka and Akka Streams</title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <meta name="description" content="Informal blog about software crafting and engineering. Not concluding list of topics: Software Quality, Testing, Backend Development, Tooling and Tipps."/>
      <meta name="author" content="Christian Kleinboelting"/>
      <meta name="keywords" content="Software, Clean Code, Software Testing, Java, Scala, Python"/>
      <meta name="generator" content="JBake"/>

      <!-- Le styles -->
      <link href="../../css/app.css" rel="stylesheet"/>
      <link rel="shortcut icon" href="../../favicon.ico"/>
      <!-- Begin Cookie Consent -->
      <script type="text/javascript">
          window.cookieconsent_options = {"message":"This blog uses cookies to ensure you get the best experience on our website","dismiss":"Got it!","learnMore":"More info","link":null,"theme":"dark-bottom"};
      </script>
      <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/1.0.10/cookieconsent.min.js"></script>
      <!-- End Cookie Consent plugin -->
  </head>
  <body>
    <div class="title-bar">
      <div class="title-bar-left">
        <ul class="menu">
          <li class="menu-text"><span class="has-tip" title="[sɪst'ɛmɪk] pertaining to or affecting a system as a whole" aria-haspopup="true">Systemic</span> Blog</li>

          <li><a href="../../index.html">Home</a></li>
          <li><a href="../../about.html">About</a></li>
          <li><a href="../../archive.html">Archive</a></li>
        </ul>
      </div>
      <div class="title-bar-right hide-for-small-only">
        <ul class="menu">
          <li><a href="../../feed.xml">feed.xml</a></li>
        </ul>
      </div>
    </div>

    <div class="row" id="content">
      <div class="medium-8 medium-offset-2 columns end">
        <div class="blog-post">
          <h1>A JUnit 5 Extension for testing Akka and Akka Streams</h1>
          <p><em>01 June 2018</em></p>
          <p><div class="paragraph"> 
 <p>For an existing project we are using <a href="https://akka.io/">Akka</a> with <a href="https://junit.org/junit5/">JUnit 5</a>.</p> 
</div> 
<div class="paragraph"> 
 <p>Akka is an amazing toolkit which has an implementation of the actor model (<a href="https://doc.akka.io/docs/akka/current/guide/actors-motivation.html">akka-actors</a>) as well as the reactive streams (<a href="https://doc.akka.io/docs/akka/current/typed/stream.html#streams">akka-streams</a>) and already comes with a handy test kit as well. However for using the test kit you will still need to setup Akka components like <code>ActorSystem</code> or <code>ActorMaterializer</code> yourself. In order to make this a bit more convenient using JUnit I decided to create a small extension takes care of the lifecycle of those two components during test.</p> 
</div> 
<div class="paragraph"> 
 <p><a href="https://junit.org/junit5/docs/current/user-guide/#extensions">JUnit 5 extensions</a> allow you to setup your testing harness. It provides certain hooks which are called <a href="https://junit.org/junit5/docs/current/user-guide/#extensions-lifecycle-callbacks">before, during and after the tests</a>, your extension can use a context object in which it <a href="https://junit.org/junit5/docs/current/user-guide/#extensions-keeping-state">can store its state</a>. An extension can <a href="https://junit.org/junit5/docs/current/user-guide/#extensions-parameter-resolution">resolve test method parameters</a> effectively injecting the components it is managing into each test method.</p> 
</div> 
<div class="paragraph"> 
 <p>The little <a href="https://github.com/seakayone/akka-junit"><code>AkkaJunitExtension</code></a> I have created can easily be used. The following test is a short demonstration of that:</p> 
</div> 
<div class="listingblock"> 
 <div class="content"> 
  <pre class="prettyprint highlight"><code class="language-java" data-lang="java">@ExtendWith(AkkaJunitExtension.class)
@AkkaJunitExtensionConfig(name = "test")
class SomeAkkaJunit5Test {

    @Test
    void system_is_present(ActorSystem system){
        assertThat(system).isNotNull();
    }

    @Test
    void system_has_name(ActorSystem system){
        assertThat(system.name()).isEqualTo("test");
    }

    @Test
    void actormaterializer_is_present(ActorMaterializer mat) {
        assertThat(mat).isNotNull();
    }
}</code></pre> 
 </div> 
</div></p>
        </div>
        <div id="disqus_thread"></div>
        <script>
          var disqus_config = function () {
              this.page.url = 'http://seakayone.github.io/blog/';
              this.page.identifier = 'systemic-noise';
          };
          (function() {
            var d = document, s = d.createElement('script');
            s.src = '//systemic-noise.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      </div>
    </div>
    <div>
      <div class="row column">
        <ul class="menu">
          <li><a href="#">Top</a></li>
        </ul>
      </div>
      <script src="../../js/jquery.js"></script>
      <script src="../../js/foundation.min.js"></script>
      <script src="../../js/prettify.js"></script>
      <script src="../../js/app.js"></script>
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-83282715-1', 'auto');
        ga('send', 'pageview');

      </script>
    </div>
  </body>
</html>
